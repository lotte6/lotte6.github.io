---
layout: post
title: DNS 防DDOS攻击
categories: Security
date: 2020-04-30 19:37:49
tags:
keywords:
description:
---

一、背景：防止DDOS洪水攻击

二、影响：
>    1、cdn厂商如果遇到攻击会直接流量回源，及时有防御的，超过防御值也会回源。如果有钱任性，那请略过下面内容。
>    2、代理节点，一般的代理节点，流量过大，遇到ddos的话会直接封掉ip，高防节点类似防御cdn，攻击流量大于防御值就会不可用或者回源。

三、解决思路：由于ddos攻击会使某个节点或者ip无法访问，导致业务崩溃。所以需要实现高可用可以通过智能dns自动切换来实现，其中包括的技术点：智能DNS、监控、自动切换(只是一种解题思路，欢迎大神来讨论)

![Image](/public/img/security-dns.jpg)

部署：

> dns解析：域名新增多条A记录，每条记录对应一个proxy节点，调整解析权重，把高防节点权重调味最低，或者调整为备用（视不通解析厂商功能有所差异）

> 监控：部分解析厂商有监控功能，自行配置。如果没有需要通过三防监控或者自行部署监控触发。

> 自动切换：如dns厂商有自动切换功能，那直接配置即可，自动下线无法响应节点，如果自建或者三方监控则需要配合厂商api进行解析调整。

> 题外：如果cdn厂商提供A记录则可以添加到轮训解析并且设置最高权重。别问为什么CNAME不行。